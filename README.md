# SE-PROJ
## members
+ Li YuanHao
+ Luo JiaSheng
+ Song Chengxi
+ Zhang peiqi
+ Qian Yumo
+ Su Jun
+ Lai FeiYu
+ Liu Kuan
## 分工
|   所属    |  姓名  |   任务    |  DDL  |  完成情况  | 备注  |
|---------- |:-------------:|------:|------:|------:|------:|
|  GUI  |李远昊   |   |  |   |developer   |
| GUI   |罗家晟   |   |  |   |leader|
| GUI   |张沛祺   |   |  |   |developer   |
| back-end/civil   |钱禹默   |   |  |   |civil&test   |
| civil   |罗仕桓   |   |  |   | civil  |
| GUI   |苏俊     |   |  |   |developer   |
|back-end    |赖飞羽   |   |  |   |developer   |
| back-end   |刘宽     |   |  |   |developer   |
| GUI/civil   |宋承熹   |   |  |   |civil&test   |
| civil   |朱博涯   |   |  |   |civil  |


### 测试情况
|   功能    |  开发人员  |   通过自测    | 通过测试（测试员填写）  | 备注  |
|---------- |:-------------:|------:|------:|------:|
|    |   |   |  |   |
|    |   |   |  |   |
|    |   |   |  |   |
|    |   |   |  |   |
|    |   |   |  |   |
|    |   |   |  |   |
|    |   |   |  |   |


## 项目说明
+ 本项目为酒店管理系统，使用python开发
+ 本项目使用了内置sqlite数据库
+ 本项目预计使用pyqt库进行GUI开发
+ 本项目预计使用pyinstaller库进行打包，格式为exe
+ 实现功能：
    1. 用户注册及登录
    2. 用户预订以及入住房间
    3. 酒店方管理房间 


## sqlite数据库说明
+ 本数据库为sqlite数据库，数据库名为info.db
+ 数据库中有三张表，分别为user，room以及orderl
+ 注意数据库调用关键字cursor
### user表
+ user表中有六个字段，分别为    
    + user_id INT PRIMARY KEY
    + user_name TEXT
    + user_phone INT
    + user_email TEXT
    + user_card INT
    + user_pwd TEXT
+ user_id为主键，使用随机生成的数字
+ user_card为用于支付或担保的银行卡号
### room表
+ room表中有三个字段，分别为
    + room_num INT PRIMARY KEY
    + room_type TEXT
    + room_price INT
+ room_num为主键，使用三位数字，代表楼层和编号
+ room_price为按天计算的价格
### orderl表
+ orderl表中有七个字段，分别为
    + order_id INT PRIMARY KEY
    + room_num INT
    + user_id INT
    + ck_in DATE
    + ck_out DATE
    + order_status INT
    + comment TEXT
+ order_id为主键，使用随机生成的数字
+ order_status 0代表已预订，1代表已入住，2代表已退房，3代表已取消

## 具体功能说明（后端）
### 用户注册及登录
1. 用户注册
    + 用户注册时需要输入用户名，手机号，邮箱，银行卡号以及密码
    + 用户名，手机号，银行卡号以及密码均不能为空
    + 注册成功或失败须返回相应信息
    + 注册成功后，用户信息存入数据库user表
    + 每个用户有一个唯一的user_id，用于识别和区分不同用户
2. 用户登录
    + 用户登录时需要输入用户名和密码，或者手机号和密码，或者邮箱和密码
    + 用户登陆成功或失败，返回相应信息
    + 登录成功后，可以查看自己的个人信息
    + 登录成功后，可以修改用户名，手机号，邮箱，银行卡号以及密码
    + 登录成功后，可以查看并修改自己的订单信息
3. 管理账户
    + 设置一个管理员账户，用于管理房间
    + 管理员账户可以查看所有用户的信息
    + 管理员账户可以查看和修改所有房间的信息
    + 管理员账户可以查看和修改所有订单状态
    
### 用户预订以及入住房间
1. 用户预定
    + 用户预定时需要输入入住时间，退房时间，房间类型
    + 用户输入信息后，系统返回可预定的房间信息
    + 用户预定成功或失败，返回相应信息
    + 预定成功后，订单信息存入数据库order表
    + 每个订单有一个唯一的order_id，用于识别和区分不同订单
2. 用户入住
    + 入住成功后，订单状态改为已入住
3. 用户退房
    + 退房成功后，订单状态改为已退房
    + 退房成功后，房间状态改为空闲
    + 退房成功后，用户可以评价房间,评价信息录入order表

### 后端功能清单
1. 通过user_id返回用户的信息，包括user表中所有字段
2. 通过电话号码和密码，邮箱和密码，或者用户名和密码判断是否登录成功，登录成功返回登录成功信息以及当前用户的user_id，失败返回登录失败原因（用户不存在，密码错误，密码或用户名为空）
3. 通过电话号码，邮箱，用户名，银行卡号和密码注册，注册成功返回注册成功信息并生成唯一的user_id并返回，失败返回注册失败信息，失败原因包括用户名已存在，手机号已存在，邮箱已存在，任意一字段为空；无需返回失败原因
4. 通过user_id修改用户信息，修改信息可能覆盖user表中所有字段，user_id不可修改
4. 通过时间段和房型查找可预定房间，返回所有可预定房间信息，包括room表中所有字段所有相应行
5. 通过房间号，用户id，入住时间，退房时间，为订单以及唯一的order_id，订单状态为默认为0，返回order_id
6. 通过房型和时间段计算价格并返回
7. 通过order_id返回订单信息，包括order表中所有字段
8. 通过order_id修改订单信息，修改信息可能覆盖order表中所有字段，order_id不可修改
9. 通过order_id进行评论，仅状态为2的订单可以评论，否则返回评论失败信息
10. 返回所有用户信息，包括user表中所有字段所有行
11. 返回所有订单信息，包括order表中所有字段所有行
12. 返回所有房间信息，包括room表中所有字段所有行
13. 通过房间号修改房间信息，修改信息可能覆盖room表中所有字段，room_num不可修改
14. 通过房间号返回房间信息，包括room表中所有字段
15. 仅通过用户名和密码新建用户，注意与3是不同接口
16. 新建房间，注意房间号不能为空
17. 新建订单（注意与5是不同接口，无需额外信息，只要求任何一个字段不为空）
18. 通过房间号删除房间（删除相应行）
19. 通过user_id删除订单（删除相应行）

+ 注意order_id，user_id，room_num为主键，不可重复,不可修改
+ order_id,user_id为生成的随机数字，room_num为管理员输入的三位数字
+ 开发人员为已经开发的接口提供详细说明
+ 开发人员可以自行添加接口，但必须在此说明
+ 后期可能有需求变动




## 具体功能说明（前端）
1. 用户登录界面
    + 实现登录功能，注意与后端数据交互
    + 注册按钮（跳转到房间预定界面）
    + 跳过登录按钮（跳转到房间预定界面）
    + 登录成功或失败跳到相应信息界面
2. 登录成功界面
    + 显示登陆成功
    + 自动跳转到房间预定界面
    + 手动跳转按钮（跳转到房间预定界面）
    + 修改登陆状态
    + 如果为管理员账户则跳转到管理员界面
3. 登录失败界面
    + 显示登录失败
    + 显示失败原因（如密码不正确）
    + 返回按钮（跳转到登录界面）
4. 用户注册界面
    + 实现注册功能，注意与后端数据交互
    + 注册成功或失败跳到相应信息界面
    + 取消按钮（跳转到登录界面）
5. 注册成功界面
    + 显示注册成功
    + 自动实现登录
    + 自动跳转到房间预定界面
    + 手动跳转按钮（跳转到房间预定界面）
    + 手动跳转按钮（跳转到个人信息页）
    + 修改登陆状态
6. 注册失败界面
    + 显示注册失败
    + 显示失败原因
    + 返回按钮（跳转到注册界面）
7. 个人信息界面
    + 显示个人信息
    + 显示订单信息
    + 修改个人信息按钮
    + 实现修改个人信息功能，注意与后端数据交互
    + 删除订单按钮
    + 实现删除订单功能，注意与后端数据交互
    + 增加订单按钮（跳转到房间预定界面）
    + 评价按钮（注意仅已退房可以评价，状态为2的订单）
    + 实现评价功能，注意与后端数据交互
    + 退出登录按钮（跳转到登录界面，修改登录状态）
    + 返回按钮（跳转到跳转前页面）
8. 账户模块
    + 界面右上角显示已登录账户的用户名
    + 点击用户名跳转到个人信息界面
    + *如未登录，显示登录按钮（跳转到登录界面）
9. 房间预定界面
    + 时间选择功能
    + 房间类型选择功能
    + 查询按钮
    + 实现查询功能，注意与后端数据交互
    + 房间信息显示到选择框下方
    + 每条信息有预定按钮
    + 点击预定按钮跳转到订单信息界面
    + 账户模块 
10. 订单信息界面
    + 显示订单信息
    + 确认按钮
    + 实现预定功能，注意与后端数据交互
    + 取消按钮（跳转到房间预定界面）
    + 预定成功或失败跳转到相应信息界面
    + 账户模块
11. 预定成功界面
    + 显示预定成功
    + 显示订单信息
    + 跳转按钮（跳转到个人信息界面）
    + 继续预定按钮（跳转到房间预定界面）
12. 预定失败按钮
    + 显示预定失败
    + 显示失败原因
    + 返回按钮（跳转到房间预定界面）
13. 管理员界面
    + 显示所有用户信息
    + 显示所有订单信息
    + 显示修改订单状态按钮
    + 实现修改订单状态功能，注意与后端数据交互
    + 显示修改用户信息按钮
    + 实现修改用户信息功能，注意与后端数据交互
    + 退出登录按钮（跳转到登录界面，修改登录状态）

+ 登录状态：0代表未登录，1代表已登录，2代表管理员登录



